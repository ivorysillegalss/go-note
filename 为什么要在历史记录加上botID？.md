为什么要在历史记录加上botID？

因为获取历史记录和LRU的颗粒度是以Bot为单位的

也就是说  每个bot都需要维护一个LRU



目前思路 如果每个功能都存LRU的话 会有很多的内存空间浪费

所以此处方案 效仿redis 中的定期 & 随机扫盘删除

通过某种办法判断用户是否很久没有调用过某些chat 并让他自动过期

但是这个某种办法是重点 思路可以是再来一个hash表或zset 但是这样做多出一份hash 并且LRU需要大改

简单点就可以根据用户最后一次登录的时间进行判断（或者是最后一次使用某个功能时间进行判断）



所以现在的问题是 如果我需要准确的获取到每个Bot中的LRU维护的历史记录

我应该怎么锚定它

目前打算在原基础上加上botId的后缀

但是哪个需要加 哪个不用加？



现在与之相关的缓存值有

1. 历史记录缓存

chatHistory.chatId

这个是否需要改呢？ 应该不用 因为我直接获取历史记录的前提是 通过LRU获取到对应的chatId了 而历史标识(chatId) 在确认所要操作的表的前提下是唯一的

2. chatHistoryTitle.chatId

同理 这个应该也不需要改 因为我获取标题具体值的前提是 我已经通过LRU确定了要加载的是哪个值 但是同样需要前置确认所要操作的表

3. chatHistoryLruScore.userId	

这个不一样 之前是默认了只有一个bot 所以颗粒度只有用户 但是加上了bot这一模块后 需要加上botId 用以标识每个bot都有一份属于自己的LRU缓存



但是我需要botId来标识操作的表是新表还是旧表

评价为从LRUscore相关设置开始改起



对于LRUScore 我已经可以通过BotId判断是哪个表里面的了 所以不再需要加判断新&旧表的逻辑



并且 我现在只设置了LRU为加载最近5次的历史记录 但是没有删掉第5次之前的 也就是说 LRU前的只也还是在缓存中 并且没有处理它